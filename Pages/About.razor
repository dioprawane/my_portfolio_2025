@page "/apropos"
@using Radzen
@using Radzen.Blazor
@using Microsoft.AspNetCore.Components

@if (ShowPageTitle)
{
    <PageTitle>A Propos</PageTitle>
}

@if (isMobile == null)                  
{
    <p>Chargement en cours ...</p>
}
else if (isMobile == true)
{
    <RadzenCard Style="max-width: 900px; margin: auto; padding: 2rem;">
        <RadzenStack AlignItems="AlignItems.Center" Gap="1.25rem">
            <div class="profile-frame">
                <img src="/ap.png"
                     alt="Portrait de DIOP Serigne Rawane"
                     loading="lazy"
                     class="profile-photo" />
            </div>
            <h2 class="about-name">DIOP Serigne Rawane</h2>
            <div class="about-headline">
                <span class="role-main">Concepteur Développeur .NET</span>
                <span class="role-dot">•</span>
                <span class="role-sub">Data&nbsp;Analyst</span>
                <span class="role-dot">•</span>
                <span class="role-sub">IA</span>
            </div>
        </RadzenStack>

        <RadzenDivider class="rz-my-4" />

        <RadzenStack Orientation="Orientation.Vertical" Gap="0.75rem" JustifyContent="JustifyContent.Center" Class="rz-mt-2 rz-flex-wrap">
            <RadzenButton Text="Mon CV"
                          Click="@DownloadCV"
                          Icon="download"
                          Size="ButtonSize.Large"
                          class="cv-btn-mobile" />

            <RadzenStack Orientation="Orientation.Horizontal" JustifyContent="JustifyContent.Center" Gap="0.75rem">
                <RadzenLink Path="https://www.linkedin.com/in/serigne-rawane-diop-7aa3931bb" Target="_blank" class="social-chip-mobile">
                    <img src="linkedin-svgrepo-com.svg" alt="LinkedIn" class="social-icon" />
                    <span>LinkedIn</span>
                </RadzenLink>

                <RadzenLink Path="https://github.com/dioprawane" Target="_blank" class="social-chip-mobile">
                    <img src="/images/github.svg" alt="GitHub" class="social-icon" />
                    <span>GitHub</span>
                </RadzenLink>
            </RadzenStack>
        </RadzenStack>

        <RadzenRow class="rz-mt-4">
            <RadzenColumn Size="12">
                <RadzenText TextStyle="TextStyle.Body1">
                    Passionné par le développement logiciel, l'intelligence artificielle et la data, concepteur développeur en C# et analyste de données.
                    <br /><br />
                    Parcours académique en MIAGE (Méthodes Informatiques Appliquées à la Gestion des Entreprises), spécialisé en Intelligence Artificielle Appliquée.
                </RadzenText>
            </RadzenColumn>
        </RadzenRow>

        <RadzenRow class="rz-mt-4 rz-gap-2">
            <RadzenColumn Size="12" SizeMD="6">
                <RadzenCard Class="info-card" @onclick="GoToFormations">
                    <div class="info-accent"></div>
                    <RadzenStack Gap="0.35rem">
                        <RadzenIcon Icon="school" Class="info-icon" />
                        <div class="info-title">Formation</div>
                        <div class="info-subtitle">Master MIAGE IA2 - Université Côte d’Azur</div>
                    </RadzenStack>
                </RadzenCard>
            </RadzenColumn>
            <RadzenColumn Size="12" SizeMD="6">
                <RadzenCard Class="info-card" @onclick="GoToExperiences">
                    <div class="info-accent"></div>
                    <RadzenStack Gap="0.35rem">
                        <RadzenIcon Icon="work" Class="info-icon" />
                        <div class="info-title">Expérience</div>
                        <div class="info-subtitle">Développeur .NET & Statisticien - Acoss</div>
                    </RadzenStack>
                </RadzenCard>
            </RadzenColumn>
        </RadzenRow>
        <RadzenRow class="rz-mt-4">
            <RadzenColumn Size="12" Class="d-flex justify-content-center">
                <RadzenText Text="Mes Valeurs" TextStyle="TextStyle.H5" TagName="TagName.H2" Class="rz-mb-3" />
            </RadzenColumn>
        </RadzenRow>
        <RadzenRow class="rz-mt-4">
            <div class="values-grid">
                <RadzenCard Class="value-box" Variant="Variant.Flat">
                    <div class="value-icon">
                        <RadzenIcon Icon="lightbulb" />
                    </div>
                    <div class="v-title">Innovation</div>
                    <div class="v-desc">Curiosité, Veille technologique & Solutions créatives.</div>
                </RadzenCard>
                <RadzenCard Class="value-box" Variant="Variant.Flat">
                    <div class="value-icon">
                        <RadzenIcon Icon="handshake" />
                    </div>
                    <div class="v-title">Collaboration</div>
                    <div class="v-desc">Esprit d’équipe, Sens du service & Synergie collective.</div>
                </RadzenCard>
                <RadzenCard Class="value-box" Variant="Variant.Flat">
                    <div class="value-icon">
                        <RadzenIcon Icon="stacked_line_chart" />
                    </div>
                    <div class="v-title">Qualité</div>
                    <div class="v-desc">Autonomie, Rigueur & Sens de l’amélioration continue.</div>
                </RadzenCard>
            </div>
        </RadzenRow>
        <RadzenRow class="rz-mt-4">
            <RadzenColumn Size="12">
                <RadzenAlert Severity="Info">
                    Ce site a été conçu avec Blazor et les composants Radzen pour illustrer mes compétences en développement web moderne.
                </RadzenAlert>
            </RadzenColumn>
        </RadzenRow>
    </RadzenCard>    
}
else
{
    <RadzenCard Style="max-width: 900px; margin: auto; padding: 2rem;">
        <RadzenStack AlignItems="AlignItems.Center" Gap="1.25rem">

            <!-- Cadre photo design -->
            <div class="profile-frame">
                <img src="/ap.png"
                     alt="Portrait de DIOP Serigne Rawane"
                     loading="lazy"
                     class="profile-photo" />
            </div>

            <!-- Titres -->
            <h2 class="about-name">DIOP Serigne Rawane</h2>
            <div class="about-headline">
                <span class="role-main">Concepteur Développeur .NET</span>
                <span class="role-dot">•</span>
                <span class="role-sub">Data&nbsp;Analyst</span>
                <span class="role-dot">•</span>
                <span class="role-sub">IA</span>
            </div>

        </RadzenStack>

        <RadzenDivider class="rz-my-4" />

        <!-- === CTA & Réseaux === -->
        <RadzenStack Orientation="Orientation.Horizontal" Gap="0.75rem" JustifyContent="JustifyContent.Center" Class="rz-mt-2 rz-flex-wrap">
            <!-- Bouton CV -->
            <RadzenButton Text="Télécharger mon CV"
                          Click="@DownloadCV"
                          Icon="download"
                          Size="ButtonSize.Medium"
                          class="cv-btn" />

            <!-- Réseaux -->
            <RadzenLink Path="https://www.linkedin.com/in/serigne-rawane-diop-7aa3931bb" Target="_blank" class="social-chip">
                <img src="linkedin-svgrepo-com.svg" alt="LinkedIn" class="social-icon" />
                <span>LinkedIn</span>
            </RadzenLink>

            <RadzenLink Path="https://github.com/dioprawane" Target="_blank" class="social-chip">
                <img src="/images/github.svg" alt="GitHub" class="social-icon" />
                <span>GitHub</span>
            </RadzenLink>
        </RadzenStack>

        <RadzenRow class="rz-mt-4">
            <RadzenColumn Size="12">
                <RadzenText TextStyle="TextStyle.Body1">
                    Passionné par le développement logiciel, l'intelligence artificielle et la data, concepteur développeur en C# et analyste de données.
                    <br /><br />
                    Parcours académique en MIAGE (Méthodes Informatiques Appliquées à la Gestion des Entreprises), spécialisé en Intelligence Artificielle Appliquée.
                </RadzenText>
            </RadzenColumn>
        </RadzenRow>

        <RadzenRow class="rz-mt-4 rz-gap-2">

            <RadzenColumn Size="12" SizeMD="6">
                <RadzenCard Class="info-card" @onclick="GoToFormations">
                    <div class="info-accent"></div>
                    <RadzenStack Gap="0.35rem">
                        <RadzenIcon Icon="school" Class="info-icon" />
                        <div class="info-title">Formation</div>
                        <div class="info-subtitle">Master MIAGE IA2 - Université Côte d’Azur</div>
                    </RadzenStack>
                </RadzenCard>
            </RadzenColumn>

            <RadzenColumn Size="12" SizeMD="6">
                <RadzenCard Class="info-card" @onclick="GoToExperiences">
                    <div class="info-accent"></div>
                    <RadzenStack Gap="0.35rem">
                        <RadzenIcon Icon="work" Class="info-icon" />
                        <div class="info-title">Expérience</div>
                        <div class="info-subtitle">Développeur .NET & Statisticien - Acoss</div>
                    </RadzenStack>
                </RadzenCard>
            </RadzenColumn>

        </RadzenRow>

        <RadzenRow class="rz-mt-4">
            <RadzenColumn Size="12" Class="d-flex justify-content-center">
                <RadzenText Text="Mes Valeurs" TextStyle="TextStyle.H5" TagName="TagName.H2" Class="rz-mb-3" />
            </RadzenColumn>
        </RadzenRow>

        <RadzenRow class="rz-mt-4">

            <div class="values-grid">
                <!-- Innovation -->
                <RadzenCard Class="value-box" Variant="Variant.Flat">
                    <div class="value-icon">
                        <RadzenIcon Icon="lightbulb" />
                    </div>
                    <div class="v-title">Innovation</div>
                    <div class="v-desc">Curiosité, Veille technologique & Solutions créatives.</div>
                </RadzenCard>

                <!-- Collaboration -->
                <RadzenCard Class="value-box" Variant="Variant.Flat">
                    <div class="value-icon">
                        <RadzenIcon Icon="handshake" />
                    </div>
                    <div class="v-title">Collaboration</div>
                    <div class="v-desc">Esprit d’équipe, Sens du service & Synergie collective.</div>
                </RadzenCard>

                <!-- Qualité & Mesure -->
                <RadzenCard Class="value-box" Variant="Variant.Flat">
                    <div class="value-icon">
                        <RadzenIcon Icon="stacked_line_chart" />
                    </div>
                    <div class="v-title">Qualité</div>
                    <div class="v-desc">Autonomie, Rigueur & Sens de l’amélioration continue.</div>
                </RadzenCard>
            </div>
        </RadzenRow>


        <RadzenRow class="rz-mt-4">
            <RadzenColumn Size="12">
                <RadzenAlert Severity="Info">
                    Ce site a été conçu avec Blazor et les composants Radzen pour illustrer mes compétences en développement web moderne.
                </RadzenAlert>
            </RadzenColumn>
        </RadzenRow>

    </RadzenCard>
}


<style>
    .profile-frame{
      position: relative;
      width: min(360px, 84vw);
      aspect-ratio: 3 / 4;                 /* cadre vertical harmonieux */
      border-radius: 60% / 20%;
      padding: 6px;                        /* espace pour l'anneau */
      background: conic-gradient(from 160deg,
                  #6ee7f9, #a78bfa, #f472b6, #6ee7f9);
      /* halo subtil */
      box-shadow:
        0 8px 24px rgba(0,0,0,.16),
        0 1px 0 rgba(255,255,255,.2) inset;
    }

    .profile-photo{
      width: 100%;
      height: 100%;
      display: block;
      border-radius: 60% / 20%; /* un peu moins que le frame */
      object-fit: cover;                    /* recadre proprement */
      object-position: center 40%;
      background: #111;                     /* sécurité si l'image tarde */
      box-shadow: 0 12px 40px rgba(0,0,0,.25);
      filter: saturate(1.05) contrast(1.02);
      transition: transform .35s ease, box-shadow .35s ease;
    }

    .profile-frame:hover .profile-photo{
      transform: translateY(-2px) scale(1.01);
      box-shadow: 0 18px 50px rgba(0,0,0,.32);
    }

    /* ----- Typo titres ----- */
    .about-name{
      font-size: clamp(1.35rem, 1.1rem + 1.5vw, 2rem);
      font-weight: 800;
      line-height: 1.1;
      margin: .25rem 0 0 0;
      letter-spacing: .2px;
    }

    .about-role{
      color: var(--rz-text-secondary-color, #6b7280);
      font-size: clamp(.95rem, .85rem + .4vw, 1.05rem);
    }

    /* Option : assombrit le card très légèrement pour effet vitré */
    .rz-card{
      backdrop-filter: saturate(1.2) blur(0px);
    }

    /* --- Cards style --- */
    .info-card{
      position: relative;
      height: 100%;
      padding: 1.25rem 1.25rem 1.35rem 1.25rem;
      border-radius: 14px;
      cursor: pointer;
      transition: transform .18s ease, box-shadow .18s ease, border-color .2s ease;
      border: 1px solid rgba(0,0,0,.06);
      box-shadow: 0 1px 1px rgba(0,0,0,.04);
      overflow: hidden;
    }
    .info-card:hover{
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(0,0,0,.10), 0 2px 6px rgba(0,0,0,.06);
      border-color: rgba(25,118,210,.25);
    }

    /* petit filet dégradé en haut (comme un tag visuel) */
    .info-accent{
      position: absolute;
      inset: 0 0 auto 0;
      height: 4px;
      background: linear-gradient(90deg,#1976d2, #42a5f5, #90caf9);
      opacity: .9;
    }

    /* Icone + typographies */
    .info-icon{
      font-size: 24px;
      color: #1976d2;
    }
    .info-title{
      font-weight: 700;
      font-size: clamp(1rem, .9rem + .4vw, 1.25rem);
      line-height: 1.2;
    }
    .info-subtitle{
      color: var(--rz-text-secondary-color, #6b7280);
      font-size: clamp(.95rem, .9rem + .2vw, 1rem);
    }

    /* Support dark/light subtil */
    :root .info-card{ background: #fff; }
        @@media (prefers-color-scheme: dark) {
            :root .info-card {
                background: #101418;
                border-color: rgba(255,255,255,.06);
            }

                :root .info-card:hover {
                    border-color: rgba(66,165,245,.35);
                }
        }
    /* ------ Headline ------ */
    .about-headline {
        display: flex;
        flex-wrap: wrap;
        gap: .35rem .6rem;
        align-items: center;
        justify-content: center;
        margin-top: .15rem;
    }

    .role-main {
        font-weight: 800;
        font-size: clamp(1rem,.9rem + .7vw,1.25rem);
        letter-spacing: .2px;
        background: linear-gradient(90deg,#1976d2,#7c3aed);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
    }

    .role-sub {
        font-weight: 700;
        color: var(--rz-text-secondary-color,#6b7280);
        font-size: clamp(.95rem,.85rem + .4vw,1.05rem);
    }

    .role-dot {
        opacity: .35;
        color: var(--rz-text-secondary-color,#6b7280);
    }

    /* petites “chips” sous le titre */
    .role-tags {
        display: flex;
        gap: .4rem;
        justify-content: center;
        margin-top: .25rem;
    }

    .tag {
        background: #eef2f7;
        color: #334155;
        font-weight: 700;
        padding: .25rem .55rem;
        border-radius: 999px;
        font-size: .78rem;
        box-shadow: 0 1px 2px rgba(0,0,0,.06);
    }
    @@media (prefers-color-scheme:dark) {
        .tag

    {
        background: #122033;
        color: #dbeafe;
    }

    }

    /* Sur mobile (pas de souris) : le tap reproduit le hover */
    @@media (hover:none) {
        .profile-frame:active .profile-photo, .profile-frame:focus-within .profile-photo

    {
        transform: translateY(-2px) scale(1.01);
        box-shadow: 0 18px 50px rgba(0,0,0,.32);
    }

    }

    /* --- Bouton CV premium --- */
    .cv-btn {
        --cv-bg: linear-gradient(90deg,#1976d2,#7c3aed);
        --cv-bg-hover: linear-gradient(90deg,#1e88e5,#8b5cf6);
        background: var(--cv-bg) !important;
        color: #fff !important;
        border: none !important;
        border-radius: 999px !important;
        padding: .65rem 1.1rem !important;
        font-weight: 800 !important;
        box-shadow: 0 8px 20px rgba(25,118,210,.25);
        transition: transform .18s ease, box-shadow .18s ease, background .18s ease;
    }

        .cv-btn .rz-icon {
            font-size: 1.1rem;
            margin-right: .35rem;
        }

        .cv-btn:hover {
            transform: translateY(-2px);
            background: var(--cv-bg-hover) !important;
            box-shadow: 0 14px 28px rgba(25,118,210,.28);
        }

    /* --- Social chips --- */
    .social-chip {
        display: inline-flex;
        align-items: center;
        gap: .45rem;
        padding: .5rem .85rem;
        border-radius: 999px;
        text-decoration: none;
        border: 1px solid rgba(0,0,0,.06);
        background: #fff;
        color: #1f2937 !important;
        box-shadow: 0 1px 2px rgba(0,0,0,.05);
        transition: transform .15s ease, box-shadow .15s ease, border-color .15s ease;
    }

        .social-chip:hover {
            transform: translateY(-2px);
            border-color: rgba(25,118,210,.28);
            box-shadow: 0 8px 18px rgba(0,0,0,.10);
        }

    .social-icon {
        width: 18px;
        height: 18px;
        display: inline-block;
    }

    /* --- Cartes Valeurs --- */
    .value-card {
        border-radius: 14px;
        border: 1px solid rgba(0,0,0,.06);
        padding: 1rem 1.25rem;
        transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease;
    }

        .value-card:hover {
            transform: translateY(-3px);
            border-color: rgba(25,118,210,.25);
            box-shadow: 0 12px 22px rgba(0,0,0,.10);
        }

    /* Dark mode doux */
    @@media (prefers-color-scheme: dark) {
        .social-chip

    {
        background: #0f1317;
        color: #e5e7eb !important;
        border-color: rgba(255,255,255,.06);
    }

    .value-card {
        background: #0f1317;
        border-color: rgba(255,255,255,.06);
    }

    }

    /* ====== Valeurs compact ====== */
    /* Grille compacte */
    .values-grid {
        display: grid;
        grid-template-columns: repeat(3,minmax(0,1fr));
        gap: 1rem;
    }
    @@media (max-width:768px) {
        .values-grid

    {
        grid-template-columns: 1fr;
    }

    }

    /* Carte encadrée + filet dégradé en haut (même style que Formation/Expérience) */
    .value-box {
        position: relative;
        border: 1px solid rgba(0,0,0,.08);
        border-radius: 12px;
        padding: 1rem 1rem 1.15rem;
        box-shadow: 0 1px 2px rgba(0,0,0,.05);
        transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease;
    }

        .value-box::before {
            content: "";
            position: absolute;
            inset: 0 0 auto 0;
            height: 4px;
            background: linear-gradient(90deg,#1976d2,#42a5f5,#90caf9);
        }

        .value-box:hover {
            transform: translateY(-2px);
            border-color: rgba(25,118,210,.22);
            box-shadow: 0 8px 16px rgba(0,0,0,.10);
        }

    /* Icône bleue cerclée */
    .value-icon {
        display: inline-grid;
        place-items: center;
        width: 44px;
        height: 44px;
        border-radius: 50%;
        border: 2px solid #1976d2;
        margin: 0 auto .5rem;
    }

        .value-icon .rz-icon { /* cible l’icône Radzen */
            color: #1976d2;
            font-size: 22px;
        }

    /* Titres & textes */
    .v-title {
        text-align: center;
        font-weight: 700;
        margin-bottom: .15rem;
    }

    .v-desc {
        text-align: center;
        color: var(--rz-text-secondary-color,#6b7280);
        font-size: .95rem;
        line-height: 1.35;
    }

    /* Dark mode doux */
    @@media (prefers-color-scheme:dark) {
        .value-box

    {
        background: #0f1317;
        border-color: rgba(255,255,255,.06);
    }

    .v-desc {
        color: #9aa4b2;
    }

    }

    .center-title {
        text-align: center;
        font-weight: 700;
        margin: 1rem 0;
        font-size: 1.5rem; /* taille équivalente à H5/H2 RadzenText */
    }

    /* Styles spécifiques à la version MOBILE */
    .cv-btn-mobile {
        width: 100%;
        font-size: 1.1rem;
    }

    .social-chip-mobile {
        width: 50%;
        justify-content: center;
    }


</style>

@code {
    [Parameter] public bool ShowPageTitle { get; set; } = true;
    [Inject] NavigationManager Nav { get; set; } = default!;
    [Inject] IJSRuntime JS { get; set; } = default!;
    void GoToFormations() => Nav.NavigateTo("/formations");
    void GoToExperiences() => Nav.NavigateTo("/experiences");
    private bool? isMobile = null;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            // JavaScript interop to get window width
            var width = await JS.InvokeAsync<int>("getWindowWidth");
            Console.WriteLine($"💡 Largeur détectée : {width}px");
            isMobile = width <= 768; // Detect if width is less than or equal to 768px (typical mobile breakpoint)
            StateHasChanged(); // Notify Blazor that the component state has changed
        }
    }

    // Appelle une fonction JS que tu placeras dans wwwroot (voir plus bas)
    async Task DownloadCV()
    {
        // Mets le vrai chemin vers ton CV côté wwwroot
        var url = "/files/CV_DIOP_Serigne_Rawane.pdf";
        var filename = "CV_DIOP_Serigne_Rawane.pdf";
        await JS.InvokeVoidAsync("downloadFile", url, filename);
    }
}