@page "/projets"
@using Radzen
@using Radzen.Blazor
@using BlazorPortfolio.Models
@inject IJSRuntime JSRuntime

<RadzenStack Orientation="Orientation.Vertical" Gap="2rem" Class="rz-p-4">
    <RadzenText Text="Mes Projets" TextStyle="TextStyle.H4" TagName="TagName.H1" Class="rz-text-center" />

    <RadzenRow Class="rz-mx-auto" Style="max-width: 1200px;" Gap="2rem">
        @foreach (var projet in projets)
        {
            <RadzenColumn Size="12" SizeMD="4">
                <RadzenCard Style="height: 100%; padding: 1rem;" Class="rz-shadow-2">
                    <!--<RadzenImage Path="@projet.Image" Style="width: 100%; height: 180px; object-fit: cover; border-radius: 0.5rem;" />-->
                    @if (projet.Images != null && projet.Images.Any())
                    {
                        <RadzenCarousel Autoplay="true" AutoplayInterval="3000" ShowArrows="true" ShowPagers="true"
                                        Style="width: 100%; height: 200px; border-radius: 0.5rem; overflow: hidden;">
                            <Items>
                                @foreach (var imgPath in projet.Images)
                                {
                                    <RadzenCarouselItem Style="height: 200px;">
                                        <div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; background-color: #f9f9f9;">
                                            <img src="@($"/{imgPath}")" alt="image projet"
                                                 style="max-width: 90%; max-height: 90%; object-fit: contain; border-radius: 0.5rem; transition: opacity 1s ease;" />
                                        </div>
                                    </RadzenCarouselItem>
                                }
                            </Items>
                        </RadzenCarousel>

                    }
                    else
                    {
                        <img src="/images/iut.jpg" alt="image par défaut"
                             style="width: 100%; height: 200px; object-fit: cover; border-radius: 0.5rem;" />
                    }


                    <RadzenText Text="@projet.Titre" TextStyle="TextStyle.H6" Class="rz-mt-3" />

                    <RadzenText Text="@projet.Description" TextStyle="TextStyle.Body2" Class="rz-mt-1 rz-text-justify" />

                    <RadzenStack Orientation="Orientation.Horizontal" Gap="0.5rem" Wrap="Radzen.FlexWrap.Wrap" Class="rz-mt-2">
                        @foreach (var tech in projet.Technologies)
                        {
                            <RadzenBadge Text="@tech" Style="background-color: #e0e0e0; color: #333;" />
                        }
                    </RadzenStack>

                    <RadzenStack Orientation="Orientation.Horizontal" JustifyContent="JustifyContent.End" Gap="0.5rem" Class="rz-mt-3">
                        @if (!string.IsNullOrEmpty(projet.LienGithub))
                        {
                            <RadzenLink Path="@projet.LienGithub" Target="_blank">
                                <RadzenIcon Icon="code" Style="color: #333;" />
                            </RadzenLink>
                        }
                        @if (!string.IsNullOrEmpty(projet.LienDemo))
                        {
                            <RadzenLink Path="@projet.LienDemo" Target="_blank">
                                <RadzenIcon Icon="launch" Style="color: #1976d2;" />
                            </RadzenLink>
                        }
                    </RadzenStack>
                </RadzenCard>
            </RadzenColumn>
        }
    </RadzenRow>
</RadzenStack>

@code {

    List<Projet> projets = new()
    {
        new Projet
        {
            Titre = "BestProfiles - IA pour le recrutement",
            Description = "Une plateforme de tri intelligent de CV basée sur l’IA, NLP et scoring de profils. Optimisation des recrutements en entreprise et école.",
            Technologies = new List<string> { "Blazor", "FastAPI", "Python", "NLP", "Azure" },
            Images = new List<string> { "images/unice.webp", "images/iut.png" },
            LienGithub = "https://github.com/dioprawane/best_profiles_frontend",
            LienDemo = "https://bestprofiles-demo.com"
        },
        new Projet
        {
            Titre = "Help4You - App solidaire mobile",
            Description = "Application Flutter dédiée à l'entraide sociale, avec géolocalisation et mise en relation d'utilisateurs en situation difficile.",
            Technologies = new List<string> { "Flutter", "Firebase", "Kotlin", "Google Maps" },
            Images = new List<string> { "images/Cours.png", "images/logoU.svg" },
            LienGithub = "https://github.com/ton-autre-projet",
            LienDemo = ""
        },
        new Projet
        {
            Titre = "Catalogue Immobilier",
            Description = "Portail de gestion des annonces immobilières en ligne. Upload d’images, filtres avancés, page de détails responsive.",
            Technologies = new List<string> { "React", "Node.js", "MongoDB", "Cloudinary" },
            Images = new List<string> { "images/ucad.png", "images/urssaf-logo.png" },
            LienGithub = "",
            LienDemo = "https://mon-agence-immo.com"
        }
    };
}
